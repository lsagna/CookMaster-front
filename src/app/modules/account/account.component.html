<div>
	<mat-card>
		<mat-card-content>
			<h3>Données personnelles</h3>
			<div class="justify-content-center mb-4">
				<img *ngIf="user.avatar; else defaultAvatar" src="{{user.avatar}}" class="profile-image" width="150" height="150" alt="user avatar">
				<input type="file" class="file-upload d-none" (change)="($event)" #selectFile>
				<button mat-icon-button class="profile-image-picker" (click)="selectFile.click()"><mat-icon color="primary" class="material-symbols-rounded">add_a_photo</mat-icon></button>
			</div>
			<h3 class="text-center text-primary">{{user.firstname}} {{user.lastname}}</h3>
			<mat-card-subtitle class="text-center">Date de création du compte {{user.createDate | date: 'dd/MM/YYYY'}}</mat-card-subtitle>
		</mat-card-content>
	</mat-card>
	<div class="justify-content-center">
		<button mat-flat-button color="primary" (click)="subUpdate()">Modifier l'abonnement</button>
		<button mat-flat-button color="warn" (click)="unsub()">Se désabonner</button>
	</div>
	<mat-card>
		<mat-card-content>
			<h3>{{ 'account.personal'}}</h3>
			<form [formGroup]="profileForm" (ngSubmit)="onSubmit();">
				<mat-form-field appearance="outline">
					<mat-label>{{ 'shared.lastname'}}</mat-label>
					<input matInput type="text" formControlName="lastname">
				</mat-form-field>
				<mat-form-field appearance="outline">
					<mat-label>{{ 'shared.firstname'}}</mat-label>
					<input matInput type="text" formControlName="firstname">
				</mat-form-field>
				<h3>{{ 'account.address'}}</h3>
				<div formGroupName="address">
					<mat-form-field appearance="outline">
						<mat-label>{{ 'account.address'}}</mat-label>
						<input matInput type="text" placeholder="8 rue nationale" formControlName="street">
					</mat-form-field>
					<mat-form-field appearance="outline">
						<mat-label>{{ 'account.detail'}}</mat-label>
						<input matInput type="text" placeholder="Bâtiment A" formControlName="apartment">
					</mat-form-field>
					<mat-form-field appearance="outline">
						<mat-label>{{ 'account.zip'}}</mat-label>
						<input matInput type="text" formControlName="zip">
					</mat-form-field>
					<mat-form-field appearance="outline">
						<mat-label>{{ 'account.city'}}</mat-label>
						<input matInput type="text" formControlName="city">
					</mat-form-field>
					<mat-form-field appearance="outline">
						<mat-label>{{ 'account.country'}}</mat-label>
						<input matInput type="text" formControlName="country">
					</mat-form-field>
				</div>
				<button mat-flat-button color="primary" type="submit">{{ 'account.update'}}</button>
			</form>
		</mat-card-content>
	</mat-card>
</div>

<ng-template #defaultAvatar>
	<img ngSrc="assets/images/user.png" class="profile-image" width="150" height="150" alt="user avatar">
</ng-template>

<ng-template #subscribe>
	<button mat-flat-button (click)="toSubscribe()">S'abonner à CookMaster</button>
</ng-template>